---
name: useAntdTable
route: /useAntdTable
order: 1
sidebar: true
---

# useAntdTable

React side-effect hook that can make list page with form and table simple.

## Usage

### Demo
```
import React from 'react';
import userAntdTable from '@umijs/hooks/src/userAntdTable';
import { Table, Form, Input, Button, Col, Row, Icon } from 'antd';

const getTableData = async () => {
  return fetch('https://randomuser.me/api?results=10')
    .then(function(response) {
      return response.json();
    })
}

const AppList = (props) => {
  const getFieldDecorator = props.form.getFieldDecorator;
  const {
    table: { data, loading, changeTable, },
    form: { searchType, changeSearchType, search, }
  } = userAntdTable({
    id: props.id,
    form: props.form,
    service: getTableData,
  });
  // 未请求服务端时，使用默认数据
  const tableData = data || {
    results: [],
    info: {
      results: 10,
      page: 1,
      pageSize: 5,
    }
  };

  const columns = [
    {
      title: 'name',
      dataIndex: 'name',
      key: 'name',
      width: 100,
      render({}, record) {
        return record.name.title;
      },
    },
    {
      title: 'email',
      dataIndex: 'email',
      key: 'email',
      width: 350,
    },
    {
      title: 'phone',
      dataIndex: 'phone',
      key: 'phone',
    },
    {
      title: 'gender',
      key: 'gender',
      width: 200,
      dataIndex: 'gender',
    },
  ];

  const advanceSearchForm = (
    <div>
      <Form>
        <Row gutter={24}>
          <Col span={8}>
            <Form.Item label="name">
              {getFieldDecorator('name', {
              })(<Input placeholder="name" />)}
            </Form.Item>
          </Col>
          <Col span={8}>
            <Form.Item label="email">
              {getFieldDecorator('email', {
              })(<Input placeholder="email" />)}
            </Form.Item>
          </Col>
          <Col span={16}>
            <Form.Item>
              <Button type="primary" onClick={search}>搜索</Button>
              <Button onClick={() => props.form.resetFields()}>清空</Button>
            </Form.Item>
          </Col>
        </Row>
      </Form>
      <Row>
        <Col>
          <Button type="link" onClick={changeSearchType}>简易搜索</Button>
        </Col>
      </Row>
    </div>
  );

  const searchFrom = (
    <div>
      <Form>
        <Form.Item label="name">
          {getFieldDecorator('name', {
          })(<Input placeholder="name" />)}
        </Form.Item>
        <Form.Item>
          <Button type="link" onClick={changeSearchType}>高级搜索</Button>
        </Form.Item>
      </Form>
    </div>
  );

  return (
    <>
      { searchType === 'simple' ? searchFrom : advanceSearchForm }
      <Table
        columns={columns}
        loading={loading}
        onChange={changeTable}
        pagination={{
          current: tableData.info.current,
          total: tableData.info.results,
          pageSize: 5,
        }}
        dataSource={tableData.results.map((d, index) => ({ ...d, key: index }))}
      />
    </>
  )
}

export default Form.create()(AppList);

```

## Reference

```
const {
  table: { data, loading, changeTable, },
  form: { search, }
} = useTable({ form, id: 'tableId', service: getMyApp });
```